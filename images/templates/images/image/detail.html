{% extends "base.html" %}
{% load thumbnail %}

{% block title %}{{ image.title }}{% endblock title %}

{% block content %}
<h1>{{ image.title }}</h1>

{% thumbnail image.image "300" as im %}
<a href="{{ image.image.url }}">
    <img src="{{ im.url }}" class="image-detail">
</a>
{% endthumbnail %}

{% with total_likes=image.like.count %}
<div class="image-info">
    <div>
        <span class="count">{{ total_likes }} like {{ total_likes|pluralize }}</span>
    </div>
    {{ image.description }}
</div>
<div class="image-likes">
    {% for user in image.like.all %}
        <div>
            <img src="{{ user.profile.photo.url }}">
            <p>{{ user.first_name }}</p>
        </div>
    {% empty %}
        Nobody liked this photo.
    {% endfor %}
</div>
{% endwith %}
{% endblock content %}
